var SHAREDSTATE=function(t){"use strict";function e(){let t;return[new Promise(((e,s)=>{t=e})),t]}const s=4;class n{constructor(t,e={}){this._url=t,this._ws,this._connecting=!1,this._connected=!1,this._options=e,this._retries=0,this._connect_promise_resolvers=[]}get connecting(){return this._connecting}get connected(){return this._connected}get url(){return this._url}get options(){return this._options}connect(){this.connecting||this.connected?console.log("Connect while connecting or connected"):this._is_terminated()?console.log("Terminated"):(this._ws=new WebSocket(this._url),this._connecting=!0,this._ws.onopen=t=>this._on_open(t),this._ws.onmessage=t=>this.on_message(t.data),this._ws.onclose=t=>this._on_close(t),this._ws.onerror=t=>this.on_error(t),this.on_connecting())}_on_open(t){this._connecting=!1,this._connected=!0;for(const t of this._connect_promise_resolvers)t();this._connect_promise_resolvers=[],this._retries=0,this.on_connect()}_on_close(t){this._connecting=!1,this._connected=!1,this.on_disconnect(t),this._retries+=1,this._is_terminated()||setTimeout((()=>{this.connect()}),1e3*this._retries)}_is_terminated(){const{retries:t=s}=this._options;return this._retries>=t&&(console.log(`Terminated: Max retries reached (${t})`),this._connecting=!1,this._connected=!0,this._ws.onopen=void 0,this._ws.onmessage=void 0,this._ws.onclose=void 0,this._ws.onerror=void 0,this._ws=void 0,!0)}on_connecting(){const{debug:t=!1}=this._options;t&&console.log(`Connecting ${this.url}`)}on_connect(){console.log(`Connect  ${this.url}`)}on_error(t){const{debug:e=!1}=this._options;e&&console.log(`Error: ${t}`)}on_disconnect(t){console.error(`Disconnect ${this.url}`)}on_message(t){const{debug:e=!1}=this._options;e&&console.log(`Receive: ${t}`)}send(t){if(this._connected)try{this._ws.send(t)}catch(t){console.error(`Send fail: ${t}`)}else console.log("Send drop : not connected")}connectedPromise(){const[t,s]=e();return this.connected?s():this._connect_promise_resolvers.push(s),t}}class i{constructor(t,e,s={}){this._options=s,this._terminated=!1,this._ssclient=t,this._path=e,this._handlers=[],this._map=new Map}_ssclient_terminate(){this._terminated=!0,this._handlers=[]}_ssclient_update(t={}){if(this._terminated)throw new Error("dataset already terminated");const{remove:e,insert:s,reset:n=!1}=t,i=new Map;if(n){for(const t of this._map.values())i.set(t.id,{id:t.id,new:void 0,old:t});this._map=new Map}else for(const t of e){const e=this._map.get(t);null!=e&&(this._map.delete(t),i.set(t,{id:t,new:void 0,old:e}))}for(const t of s){const e=t.id,s=i.get(e),n=null!=s?s.old:this._map.get(e);this._map.set(e,t),i.set(e,{id:e,new:t,old:n})}this._notify_callbacks([...i.values()])}_notify_callbacks(t){this._handlers.forEach((function(e){e.handler(t)}))}get_items(){return[...this._map.values()]}get size(){return this._map.size}get_item(t){return this._map.get(t)}has_item(t){return this._map.has(t)}update(t={}){if(this._terminated)throw new Error("dataset already terminated");const{insert:e=[]}=t;return t.insert=e.map((t=>(t.id=t.id||function(t){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<t;n++)e+=s.charAt(Math.floor(52*Math.random()));return e}(10),t))),this._ssclient.update(this._path,t)}add_callback(t){const e={handler:t};return this._handlers.push(e),e}remove_callback(t){const e=this._handlers.indexOf(t);e>-1&&this._handlers.splice(e,1)}}class o{constructor(t,e,s={}){this._terminiated=!1,this._ds=t,this._id=e,this._options=s,this._handlers=[],this._handle=this._ds.add_callback(this._onchange.bind(this))}_onchange(t){if(this._terminated)throw new Error("variable terminated");for(const e of t)e.id==this._id&&(this._item=e.new,this.notify_callbacks(e))}add_callback(t){const e={handler:t};return this._handlers.push(e),e}remove_callback(t){let e=this._handlers.indexOf(t);e>-1&&this._handers.splice(e,1)}notify_callbacks(t){this._handlers.forEach((function(e){e.handler(t)}))}set value(t){if(this._terminated)throw new Error("varible terminated");const e=[{id:this._id,data:t}];return this._ds.update({insert:e,reset:!1})}get value(){return this._ds.has_item(this._id)?this._ds.get_item(this._id).data:this._options.value}ss_client_terminate(){this._terminated=!0,this._ds.remove_callback(this._handle)}}const r=Object.freeze({MESSAGE:"MESSAGE",REQUEST:"REQUEST",REPLY:"REPLY"}),a=Object.freeze({GET:"GET",PUT:"PUT",NOTIFY:"NOTIFY"});function _(t){const{id:e,itv:s,data:n}=t;let i=JSON.stringify(n);return`\n        <div>\n            <button id="delete">X</button>\n            ${`<span class="id">${e}</span>`}: ${`<span class="itv">${null!=s?JSON.stringify(s):""}</span>`} ${`<span class="data">${i}</span>`}\n        </div>`}return t.DatasetViewer=class{constructor(t,e,s={}){this._ds=t,this._elem=e,this._ds.add_callback(this._onchange.bind(this));let n={delete:!1,toString:_};this._options={...n,...s},this._options.delete&&e.addEventListener("click",(t=>{const e=t.target.closest("#delete");if(e){const s=e.closest(".list-item");s&&(this._ds.update({remove:[s.id]}),t.stopPropagation())}}))}_onchange(t){const{toString:e}=this._options;for(let s of t)if(s.new){let t=this._elem.querySelector(`#${s.id}`);null==t&&(t=document.createElement("div"),t.setAttribute("id",s.id),t.classList.add("list-item"),this._elem.appendChild(t)),t.innerHTML=e(s.new)}else if(s.old){let t=this._elem.querySelector(`#${s.id}`);t&&t.parentNode.removeChild(t)}}},t.SharedStateClient=class extends n{constructor(t,e){super(t,e),this._reqid=0,this._pending=new Map,this._subs_map=new Map,this._ds_map=new Map,this._var_map=new Map}on_connect(){if(console.log(`Connect  ${this.url}`),this._subs_map.size>0){const t=[...this._subs_map.entries()];this.update("/subs",{insert:t,reset:!0})}}on_disconnect(){console.error(`Disconnect ${this.url}`)}on_error(t){const{debug:e=!1}=this._options;e&&console.log(`Communication Error: ${t}`)}on_message(t){let e=JSON.parse(t);if(e.type==r.REPLY){let t=e.tunnel;if(this._pending.has(t)){let s=this._pending.get(t);this._pending.delete(t);const{ok:n,data:i}=e;s({ok:n,data:i})}}else e.type==r.MESSAGE&&e.cmd==a.NOTIFY&&this._handle_notify(e)}_handle_notify(t){const e=this._ds_map.get(t.path);null!=e&&e._ssclient_update(t.data)}_request(t,s,n){const i=this._reqid++,o={type:r.REQUEST,cmd:t,path:s,arg:n,tunnel:i};this.send(JSON.stringify(o));let[_,h]=e();return this._pending.set(i,h),_.then((({ok:e,data:n})=>(t==a.PUT&&"/subs"==s&&e&&(this._subs_map=new Map(n)),{ok:e,path:s,data:n})))}_sub(t){if(this.connected){new Map([...this._subs_map]).set(t,{});const e=[...this._subs_map.entries()];return this.update("/subs",{insert:e,reset:!0})}return this._subs_map.set(t,{}),Promise.resolve({ok:!0,path:t,data:void 0})}_unsub(t){const e=new Map([...this._subs_map]);e.delete(t);const s=[...e.entries()];return this.update("/subs",{insert:s,reset:!0})}get(t){return this._request(a.GET,t)}update(t,e){return this._request(a.PUT,t,e)}acquire_dataset(t,e){return this._subs_map.has(t)||this._sub(t),this._ds_map.has(t)||this._ds_map.set(t,new i(this,t,e)),this._ds_map.get(t)}acquire_variable(t,e,s){const n=this.acquire_dataset(t);this._var_map.has(t)||this._var_map.set(t,new Map);const i=this._var_map.get(t);return i.get(e)||i.set(e,new o(n,e,s)),i.get(e)}release(t){this._subs_map.has(t)&&this._unsub(t);this._ds_map.get(t)._ssclient_terminate();const e=this._var_map.get(t);for(const t of e.values())t._ssclient_terminate();this._ds_map.delete(t),this._var_map.delete(t)}},t}({});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVkc3RhdGUuaWlmZS5taW4uanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGllbnQvdXRpbC5qcyIsIi4uLy4uL3NyYy9jbGllbnQvd3Npby5qcyIsIi4uLy4uL3NyYy9jbGllbnQvZGF0YXNldC5qcyIsIi4uLy4uL3NyYy9jbGllbnQvdmFyaWFibGUuanMiLCIuLi8uLi9zcmMvY2xpZW50L3NzX2NsaWVudC5qcyIsIi4uLy4uL3NyYy9jbGllbnQvdmlld2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gICAgQ3JlYXRlIGEgcHJvbWlzZSB3aGljaCBjYW4gYmUgcmVzb2x2ZWRcbiAgICBwcm9ncmFtbWF0aWNhbGx5IGJ5IGV4dGVybmFsIGNvZGUuXG4gICAgUmV0dXJuIGEgcHJvbWlzZSBhbmQgYSByZXNvbHZlIGZ1bmN0aW9uXG4qL1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2YWJsZVByb21pc2UoKSB7XG4gICAgbGV0IHJlc29sdmVyO1xuICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICByZXNvbHZlciA9IHJlc29sdmU7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtwcm9taXNlLCByZXNvbHZlcl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0UHJvbWlzZSAobXMpIHtcbiAgICBsZXQgcmVzb2x2ZXI7XG4gICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCB0aWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0sIG1zKTtcbiAgICAgICAgcmVzb2x2ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGlkKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBbcHJvbWlzZSwgcmVzb2x2ZXJdO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kb21fc3RyaW5nKGxlbmd0aCkge1xuICAgIHZhciB0ZXh0ID0gXCJcIjtcbiAgICB2YXIgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGV4dCArPSBwb3NzaWJsZS5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9zc2libGUubGVuZ3RoKSk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xufSIsImltcG9ydCB7IHJlc29sdmFibGVQcm9taXNlIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuXG5jb25zdCBNQVhfUkVUUklFUyA9IDQ7XG5cbmV4cG9ydCBjbGFzcyBXZWJTb2NrZXRJTyB7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmwsIG9wdGlvbnM9e30pIHtcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xuICAgICAgICB0aGlzLl93cztcbiAgICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuX3JldHJpZXMgPSAwO1xuICAgICAgICB0aGlzLl9jb25uZWN0X3Byb21pc2VfcmVzb2x2ZXJzID0gW107XG4gICAgfVxuXG4gICAgZ2V0IGNvbm5lY3RpbmcoKSB7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpbmc7fVxuICAgIGdldCBjb25uZWN0ZWQoKSB7cmV0dXJuIHRoaXMuX2Nvbm5lY3RlZDt9XG4gICAgZ2V0IHVybCgpIHtyZXR1cm4gdGhpcy5fdXJsO31cbiAgICBnZXQgb3B0aW9ucygpIHtyZXR1cm4gdGhpcy5fb3B0aW9uczt9XG5cbiAgICBjb25uZWN0KCkge1xuXG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RpbmcgfHwgdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29ubmVjdCB3aGlsZSBjb25uZWN0aW5nIG9yIGNvbm5lY3RlZFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faXNfdGVybWluYXRlZCgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRlcm1pbmF0ZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25uZWN0aW5nXG4gICAgICAgIHRoaXMuX3dzID0gbmV3IFdlYlNvY2tldCh0aGlzLl91cmwpO1xuICAgICAgICB0aGlzLl9jb25uZWN0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fd3Mub25vcGVuID0gZSA9PiB0aGlzLl9vbl9vcGVuKGUpO1xuICAgICAgICB0aGlzLl93cy5vbm1lc3NhZ2UgPSBlID0+IHRoaXMub25fbWVzc2FnZShlLmRhdGEpO1xuICAgICAgICB0aGlzLl93cy5vbmNsb3NlID0gZSA9PiB0aGlzLl9vbl9jbG9zZShlKTtcbiAgICAgICAgdGhpcy5fd3Mub25lcnJvciA9IGUgPT4gdGhpcy5vbl9lcnJvcihlKTtcbiAgICAgICAgdGhpcy5vbl9jb25uZWN0aW5nKCk7XG4gICAgfVxuXG4gICAgX29uX29wZW4oZXZlbnQpIHtcbiAgICAgICAgdGhpcy5fY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAvLyByZWxlYXNlIGNvbm5lY3QgcHJvbWlzZXNcbiAgICAgICAgZm9yIChjb25zdCByZXNvbHZlciBvZiB0aGlzLl9jb25uZWN0X3Byb21pc2VfcmVzb2x2ZXJzKSB7XG4gICAgICAgICAgICByZXNvbHZlcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RfcHJvbWlzZV9yZXNvbHZlcnMgPSBbXTtcbiAgICAgICAgLy8gcmVzZXQgcmV0cmllcyBvbiBzdWNjZXNzZnVsIGNvbm5lY3Rpb25cbiAgICAgICAgdGhpcy5fcmV0cmllcyA9IDA7XG4gICAgICAgIHRoaXMub25fY29ubmVjdCgpO1xuICAgIH1cblxuICAgIF9vbl9jbG9zZShldmVudCkge1xuICAgICAgICB0aGlzLl9jb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9uX2Rpc2Nvbm5lY3QoZXZlbnQpO1xuICAgICAgICB0aGlzLl9yZXRyaWVzICs9IDE7XG4gICAgICAgIGlmICghdGhpcy5faXNfdGVybWluYXRlZCgpKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QoKTtcbiAgICAgICAgICAgIH0sIDEwMDAgKiB0aGlzLl9yZXRyaWVzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfaXNfdGVybWluYXRlZCgpIHtcbiAgICAgICAgY29uc3Qge3JldHJpZXM9TUFYX1JFVFJJRVN9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgaWYgKHRoaXMuX3JldHJpZXMgPj0gcmV0cmllcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFRlcm1pbmF0ZWQ6IE1heCByZXRyaWVzIHJlYWNoZWQgKCR7cmV0cmllc30pYCk7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fd3Mub25vcGVuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5fd3Mub25tZXNzYWdlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5fd3Mub25jbG9zZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuX3dzLm9uZXJyb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLl93cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBvbl9jb25uZWN0aW5nKCkge1xuICAgICAgICBjb25zdCB7ZGVidWc9ZmFsc2V9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgaWYgKGRlYnVnKSB7Y29uc29sZS5sb2coYENvbm5lY3RpbmcgJHt0aGlzLnVybH1gKTt9XG4gICAgfVxuICAgIG9uX2Nvbm5lY3QoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBDb25uZWN0ICAke3RoaXMudXJsfWApO1xuICAgIH1cbiAgICBvbl9lcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCB7ZGVidWc9ZmFsc2V9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgaWYgKGRlYnVnKSB7Y29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApO31cbiAgICB9XG4gICAgb25fZGlzY29ubmVjdChldmVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBEaXNjb25uZWN0ICR7dGhpcy51cmx9YCk7XG4gICAgfVxuICAgIG9uX21lc3NhZ2UoZGF0YSkge1xuICAgICAgICBjb25zdCB7ZGVidWc9ZmFsc2V9ID0gdGhpcy5fb3B0aW9ucztcbiAgICAgICAgaWYgKGRlYnVnKSB7Y29uc29sZS5sb2coYFJlY2VpdmU6ICR7ZGF0YX1gKTt9XG4gICAgfVxuXG4gICAgc2VuZChkYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fd3Muc2VuZChkYXRhKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgU2VuZCBmYWlsOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFNlbmQgZHJvcCA6IG5vdCBjb25uZWN0ZWRgKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29ubmVjdGVkUHJvbWlzZSgpIHtcbiAgICAgICAgY29uc3QgW3Byb21pc2UsIHJlc29sdmVyXSA9IHJlc29sdmFibGVQcm9taXNlKCk7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgcmVzb2x2ZXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3RfcHJvbWlzZV9yZXNvbHZlcnMucHVzaChyZXNvbHZlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxufVxuXG5cbiIsImltcG9ydCB7IHJhbmRvbV9zdHJpbmcgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBEYXRhc2V0IHtcblxuICAgIGNvbnN0cnVjdG9yKHNzY2xpZW50LCBwYXRoLCBvcHRpb25zPXt9KSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLl90ZXJtaW5hdGVkID0gZmFsc2U7XG4gICAgICAgIC8vIHNoYXJlZHN0YXRlIGNsaWVudFxuICAgICAgICB0aGlzLl9zc2NsaWVudCA9IHNzY2xpZW50O1xuICAgICAgICB0aGlzLl9wYXRoID0gcGF0aDtcbiAgICAgICAgLy8gY2FsbGJhY2tzXG4gICAgICAgIHRoaXMuX2hhbmRsZXJzID0gW107XG4gICAgICAgIC8vIGl0ZW1zXG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIFNIQVJFRCBTVEFURSBDTElFTlQgQVBJXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAvKipcbiAgICAgKiBEYXRhc2V0IHJlbGVhc2VkIGJ5IHNzIGNsaWVudFxuICAgICAqL1xuXG4gICAgX3NzY2xpZW50X3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYXRlZCA9IHRydWU7XG4gICAgICAgIC8vIGVtcHR5IGRhdGFzZXQ/XG4gICAgICAgIC8vIGRpc2Nvbm5lY3QgZnJvbSBvYnNlcnZlcnNcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSBbXTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIHNlcnZlciB1cGRhdGUgZGF0YXNldCBcbiAgICAgKi9cbiAgICBfc3NjbGllbnRfdXBkYXRlIChjaGFuZ2VzPXt9KSB7XG5cbiAgICAgICAgaWYgKHRoaXMuX3Rlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImRhdGFzZXQgYWxyZWFkeSB0ZXJtaW5hdGVkXCIpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7cmVtb3ZlLCBpbnNlcnQsIHJlc2V0PWZhbHNlfSA9IGNoYW5nZXM7XG4gICAgICAgIGNvbnN0IGRpZmZfbWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBpdGVtcyAtIGNyZWF0ZSBkaWZmXG4gICAgICAgIGlmIChyZXNldCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuX21hcC52YWx1ZXMoKSkge1xuICAgICAgICAgICAgICAgIGRpZmZfbWFwLnNldChcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5pZCwgXG4gICAgICAgICAgICAgICAgICAgIHtpZDogaXRlbS5pZCwgbmV3OnVuZGVmaW5lZCwgb2xkOml0ZW19XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgX2lkIG9mIHJlbW92ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZCA9IHRoaXMuX21hcC5nZXQoX2lkKTtcbiAgICAgICAgICAgICAgICBpZiAob2xkICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZGVsZXRlKF9pZCk7XG4gICAgICAgICAgICAgICAgICAgIGRpZmZfbWFwLnNldChfaWQsIHtpZDpfaWQsIG5ldzp1bmRlZmluZWQsIG9sZH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGluc2VydCBpdGVtcyAtIHVwZGF0ZSBkaWZmXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbnNlcnQpIHtcbiAgICAgICAgICAgIGNvbnN0IF9pZCA9IGl0ZW0uaWQ7XG4gICAgICAgICAgICAvLyBvbGQgZnJvbSBkaWZmX21hcCBvciBfbWFwXG4gICAgICAgICAgICBjb25zdCBkaWZmID0gZGlmZl9tYXAuZ2V0KF9pZCk7XG4gICAgICAgICAgICBjb25zdCBvbGQgPSAoZGlmZiAhPSB1bmRlZmluZWQpID8gZGlmZi5vbGQgOiB0aGlzLl9tYXAuZ2V0KF9pZCk7XG4gICAgICAgICAgICAvLyBzZXQgc3RhdGVcbiAgICAgICAgICAgIHRoaXMuX21hcC5zZXQoX2lkLCBpdGVtKTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBkaWZmIG1hcFxuICAgICAgICAgICAgZGlmZl9tYXAuc2V0KF9pZCwge2lkOl9pZCwgbmV3Oml0ZW0sIG9sZH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX25vdGlmeV9jYWxsYmFja3MoWy4uLmRpZmZfbWFwLnZhbHVlcygpXSk7XG4gICAgfVxuXG4gICAgX25vdGlmeV9jYWxsYmFja3MgKGVBcmcpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGhhbmRsZS5oYW5kbGVyKGVBcmcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICBBUFBMSUNBVElPTiBBUElcbiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgLyoqXG4gICAgICogYXBwbGljYXRpb24gcmVxdWVzdGluZyBpdGVtc1xuICAgICAqL1xuICAgIGdldF9pdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLl9tYXAudmFsdWVzKCldO1xuICAgIH07XG4gICAgZ2V0IHNpemUoKSB7cmV0dXJuIHRoaXMuX21hcC5zaXplfTtcbiAgICBnZXRfaXRlbSAoaWQpIHtyZXR1cm4gdGhpcy5fbWFwLmdldChpZCl9IFxuICAgIGhhc19pdGVtKGlkKSB7cmV0dXJuIHRoaXMuX21hcC5oYXMoaWQpfVxuXG4gICAgLyoqXG4gICAgICogYXBwbGljYXRpb24gZGlzcGF0Y2hpbmcgdXBkYXRlIHRvIHNlcnZlclxuICAgICAqL1xuICAgIHVwZGF0ZSAoY2hhbmdlcz17fSkge1xuICAgICAgICBpZiAodGhpcy5fdGVybWluYXRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZGF0YXNldCBhbHJlYWR5IHRlcm1pbmF0ZWRcIilcbiAgICAgICAgfVxuICAgICAgICAvLyBlbnN1cmUgdGhhdCBpbnNlcnRlZCBpdGVtcyBoYXZlIGlkc1xuICAgICAgICBjb25zdCB7aW5zZXJ0PVtdfSA9IGNoYW5nZXM7XG4gICAgICAgIGNoYW5nZXMuaW5zZXJ0ID0gaW5zZXJ0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaXRlbS5pZCA9IGl0ZW0uaWQgfHwgcmFuZG9tX3N0cmluZygxMCk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9zc2NsaWVudC51cGRhdGUodGhpcy5fcGF0aCwgY2hhbmdlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYXBwbGljYXRpb24gcmVnaXN0ZXIgY2FsbGJhY2tcbiAgICAqL1xuICAgIGFkZF9jYWxsYmFjayAoaGFuZGxlcikge1xuICAgICAgICBjb25zdCBoYW5kbGUgPSB7aGFuZGxlcn07XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLnB1c2goaGFuZGxlKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICB9OyAgICBcbiAgICByZW1vdmVfY2FsbGJhY2sgKGhhbmRsZSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2hhbmRsZXJzLmluZGV4T2YoaGFuZGxlKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9OyAgICBcbn0iLCJcbi8qKlxuICogVmFyaWFibGVcbiAqIFxuICogV3JhcHBlciB0byBleHBvc2UgYSBzaW5nbGUgaWQgKGl0ZW0pIGZyb20gYW4gZGF0YXNldCBhcyBhIHN0YW5kYWxvbmUgdmFyaWFibGVcbiAqIFxuICogLSBpZiB0aGVyZSBpcyBubyBpdGVtIHdpdGggaWQgaW4gZGF0YXNldCAtIHRoZSB2YXJpYWJsZSB3aWxsIGJlIHVuZGVmaW5lZFxuICogICBvciBoYXZlIGEgZGVmYXVsdCB2YWx1ZVxuICogLSBvdGhlcndpc2UsIHRoZSBpdGVtIHdpbGwgYmUgdGhlIHZhbHVlIG9mIHRoZSB2YXJpYWJsZVxuICogXG4gKiAgVmFyaWFibGUgaW1wbGVtZW50cyB0aGUgc2FtZSBpbnRlcmZhY2UgYXMgYSBkYXRhc2V0XG4gKiAgXG4gKiAgRGVmYXVsdCB2YWx1ZSBpcyBnaXZlbiBpbiBvcHRpb25zIHt2YWx1ZTp9XG4gKi9cblxuZXhwb3J0IGNsYXNzIFZhcmlhYmxlIHtcblxuICAgIGNvbnN0cnVjdG9yKGRzLCBpZCwgb3B0aW9ucz17fSkge1xuICAgICAgICB0aGlzLl90ZXJtaW5pYXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kcyA9IGRzO1xuICAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgLy8gY2FsbGJhY2tcbiAgICAgICAgdGhpcy5faGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5faGFuZGxlID0gdGhpcy5fZHMuYWRkX2NhbGxiYWNrKHRoaXMuX29uY2hhbmdlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIF9vbmNoYW5nZShkaWZmcykge1xuICAgICAgICBpZiAodGhpcy5fdGVybWluYXRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmFyaWFibGUgdGVybWluYXRlZFwiKVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZGlmZiBvZiBkaWZmcykge1xuICAgICAgICAgICAgaWYgKGRpZmYuaWQgPT0gdGhpcy5faWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pdGVtID0gZGlmZi5uZXc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlfY2FsbGJhY2tzKGRpZmYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkX2NhbGxiYWNrIChoYW5kbGVyKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZSA9IHtoYW5kbGVyOiBoYW5kbGVyfTtcbiAgICAgICAgdGhpcy5faGFuZGxlcnMucHVzaChoYW5kbGUpO1xuICAgICAgICByZXR1cm4gaGFuZGxlO1xuICAgIH07XG4gICAgXG4gICAgcmVtb3ZlX2NhbGxiYWNrIChoYW5kbGUpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5faGFuZGxlcnMuaW5kZXhPZihoYW5kbGUpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5faGFuZGVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBub3RpZnlfY2FsbGJhY2tzIChlQXJnKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBoYW5kbGUuaGFuZGxlcihlQXJnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBcbiAgICBzZXQgdmFsdWUgKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2YXJpYmxlIHRlcm1pbmF0ZWRcIilcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IFt7aWQ6dGhpcy5faWQsIGRhdGE6dmFsdWV9XTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RzLnVwZGF0ZSh7aW5zZXJ0Oml0ZW1zLCByZXNldDpmYWxzZX0pO1xuICAgIH1cblxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RzLmhhc19pdGVtKHRoaXMuX2lkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RzLmdldF9pdGVtKHRoaXMuX2lkKS5kYXRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnMudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgc3NfY2xpZW50X3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5fdGVybWluYXRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX2RzLnJlbW92ZV9jYWxsYmFjayh0aGlzLl9oYW5kbGUpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBXZWJTb2NrZXRJTyB9IGZyb20gXCIuL3dzaW8uanNcIjtcbmltcG9ydCB7IHJlc29sdmFibGVQcm9taXNlIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IHsgRGF0YXNldCB9IGZyb20gXCIuL2RhdGFzZXQuanNcIjtcbmltcG9ydCB7IFZhcmlhYmxlIH0gZnJvbSBcIi4vdmFyaWFibGUuanNcIjtcblxuY29uc3QgTXNnVHlwZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIE1FU1NBR0UgOiBcIk1FU1NBR0VcIixcbiAgICBSRVFVRVNUOiBcIlJFUVVFU1RcIixcbiAgICBSRVBMWTogXCJSRVBMWVwiXG4gfSk7XG4gXG5jb25zdCBNc2dDbWQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBHRVQgOiBcIkdFVFwiLFxuICAgIFBVVDogXCJQVVRcIixcbiAgICBOT1RJRlk6IFwiTk9USUZZXCJcbn0pO1xuXG5cbmV4cG9ydCBjbGFzcyBTaGFyZWRTdGF0ZUNsaWVudCBleHRlbmRzIFdlYlNvY2tldElPIHtcblxuICAgIGNvbnN0cnVjdG9yICh1cmwsIG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIodXJsLCBvcHRpb25zKTtcblxuICAgICAgICAvLyByZXF1ZXN0c1xuICAgICAgICB0aGlzLl9yZXFpZCA9IDA7XG4gICAgICAgIHRoaXMuX3BlbmRpbmcgPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgLy8gc3Vic2NyaXB0aW9uc1xuICAgICAgICAvLyBwYXRoIC0+IHt9IFxuICAgICAgICB0aGlzLl9zdWJzX21hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICAvLyBkYXRhc2V0cyB7cGF0aCAtPiBkc31cbiAgICAgICAgdGhpcy5fZHNfbWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8vIHZhcmlhYmxlcyB7W3BhdGgsIGlkXSAtPiB2YXJpYWJsZX1cbiAgICAgICAgdGhpcy5fdmFyX21hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIENPTk5FQ1RJT04gXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgb25fY29ubmVjdCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coYENvbm5lY3QgICR7dGhpcy51cmx9YCk7XG4gICAgICAgIC8vIHJlZnJlc2ggbG9jYWwgc3VzY3JpcHRpb25zXG4gICAgICAgIGlmICh0aGlzLl9zdWJzX21hcC5zaXplID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4udGhpcy5fc3Vic19tYXAuZW50cmllcygpXTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKFwiL3N1YnNcIiwge2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uX2Rpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYERpc2Nvbm5lY3QgJHt0aGlzLnVybH1gKTtcbiAgICB9XG4gICAgb25fZXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3Qge2RlYnVnPWZhbHNlfSA9IHRoaXMuX29wdGlvbnM7XG4gICAgICAgIGlmIChkZWJ1Zykge2NvbnNvbGUubG9nKGBDb21tdW5pY2F0aW9uIEVycm9yOiAke2Vycm9yfWApO31cbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIEhBTkRMRVJTXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgb25fbWVzc2FnZShkYXRhKSB7XG4gICAgICAgIGxldCBtc2cgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICBpZiAobXNnLnR5cGUgPT0gTXNnVHlwZS5SRVBMWSkge1xuICAgICAgICAgICAgbGV0IHJlcWlkID0gbXNnLnR1bm5lbDtcbiAgICAgICAgICAgIGlmICh0aGlzLl9wZW5kaW5nLmhhcyhyZXFpZCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzb2x2ZXIgPSB0aGlzLl9wZW5kaW5nLmdldChyZXFpZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZy5kZWxldGUocmVxaWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHtvaywgZGF0YX0gPSBtc2c7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZXIoe29rLCBkYXRhfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobXNnLnR5cGUgPT0gTXNnVHlwZS5NRVNTQUdFKSB7XG4gICAgICAgICAgICBpZiAobXNnLmNtZCA9PSBNc2dDbWQuTk9USUZZKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlX25vdGlmeShtc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2hhbmRsZV9ub3RpZnkobXNnKSB7XG4gICAgICAgIC8vIHVwZGF0ZSBkYXRhc2V0IHN0YXRlXG4gICAgICAgIGNvbnN0IGRzID0gdGhpcy5fZHNfbWFwLmdldChtc2dbXCJwYXRoXCJdKTtcbiAgICAgICAgaWYgKGRzICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZHMuX3NzY2xpZW50X3VwZGF0ZShtc2dbXCJkYXRhXCJdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgU0VSVkVSIFJFUVVFU1RTXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgX3JlcXVlc3QoY21kLCBwYXRoLCBhcmcpIHtcbiAgICAgICAgY29uc3QgcmVxaWQgPSB0aGlzLl9yZXFpZCsrO1xuICAgICAgICBjb25zdCBtc2cgPSB7XG4gICAgICAgICAgICB0eXBlOiBNc2dUeXBlLlJFUVVFU1QsXG4gICAgICAgICAgICBjbWQsIFxuICAgICAgICAgICAgcGF0aCwgXG4gICAgICAgICAgICBhcmcsXG4gICAgICAgICAgICB0dW5uZWw6IHJlcWlkXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcbiAgICAgICAgbGV0IFtwcm9taXNlLCByZXNvbHZlcl0gPSByZXNvbHZhYmxlUHJvbWlzZSgpO1xuICAgICAgICB0aGlzLl9wZW5kaW5nLnNldChyZXFpZCwgcmVzb2x2ZXIpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKCh7b2ssIGRhdGF9KSA9PiB7XG4gICAgICAgICAgICAvLyBzcGVjaWFsIGhhbmRsaW5nIGZvciByZXBsaWVzIHRvIFBVVCAvc3Vic1xuICAgICAgICAgICAgaWYgKGNtZCA9PSBNc2dDbWQuUFVUICYmIHBhdGggPT0gXCIvc3Vic1wiICYmIG9rKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGxvY2FsIHN1YnNjcmlwdGlvbiBzdGF0ZVxuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNfbWFwID0gbmV3IE1hcChkYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtvaywgcGF0aCwgZGF0YX07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9zdWIgKHBhdGgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAvLyBjb3B5IGN1cnJlbnQgc3RhdGUgb2Ygc3Vic1xuICAgICAgICAgICAgY29uc3Qgc3Vic19tYXAgPSBuZXcgTWFwKFsuLi50aGlzLl9zdWJzX21hcF0pO1xuICAgICAgICAgICAgLy8gc2V0IG5ldyBwYXRoXG4gICAgICAgICAgICBzdWJzX21hcC5zZXQocGF0aCwge30pO1xuICAgICAgICAgICAgLy8gcmVzZXQgc3VicyBvbiBzZXJ2ZXJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLnRoaXMuX3N1YnNfbWFwLmVudHJpZXMoKV07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGUoXCIvc3Vic1wiLCB7aW5zZXJ0Oml0ZW1zLCByZXNldDp0cnVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB1cGRhdGUgbG9jYWwgc3VicyAtIHN1YnNjcmliZSBvbiByZWNvbm5lY3RcbiAgICAgICAgICAgIHRoaXMuX3N1YnNfbWFwLnNldChwYXRoLCB7fSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtvazogdHJ1ZSwgcGF0aCwgZGF0YTp1bmRlZmluZWR9KVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBfdW5zdWIgKHBhdGgpIHtcbiAgICAgICAgLy8gY29weSBjdXJyZW50IHN0YXRlIG9mIHN1YnNcbiAgICAgICAgY29uc3Qgc3Vic19tYXAgPSBuZXcgTWFwKFsuLi50aGlzLl9zdWJzX21hcF0pO1xuICAgICAgICAvLyByZW1vdmUgcGF0aFxuICAgICAgICBzdWJzX21hcC5kZWxldGUocGF0aClcbiAgICAgICAgLy8gcmVzZXQgc3VicyBvbiBzZXJ2ZXJcbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uc3Vic19tYXAuZW50cmllcygpXTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKFwiL3N1YnNcIiwge2luc2VydDppdGVtcywgcmVzZXQ6dHJ1ZX0pO1xuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgQVBJXG4gICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgLy8gZ2V0IHJlcXVlc3QgZm9yIGl0ZW1zIGJ5IHBhdGhcbiAgICBnZXQocGF0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChNc2dDbWQuR0VULCBwYXRoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gdXBkYXRlIHJlcXVlc3QgZm9yIHBhdGhcbiAgICB1cGRhdGUocGF0aCwgY2hhbmdlcykge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChNc2dDbWQuUFVULCBwYXRoLCBjaGFuZ2VzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlIGRhdGFzZXQgZm9yIHBhdGhcbiAgICAgKiAtIGF1dG9tYXRpY2FsbHkgc3Vic2NyaWJlcyB0byBwYXRoIGlmIG5lZWRlZFxuICAgICAqL1xuXG4gICAgYWNxdWlyZV9kYXRhc2V0IChwYXRoLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIHN1YnNjcmliZSBpZiBzdWJzY3JpcHRpb24gZG9lcyBub3QgZXhpc3RzXG4gICAgICAgIGlmICghdGhpcy5fc3Vic19tYXAuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICAvLyBzdWJzY3JpYmUgdG8gcGF0aFxuICAgICAgICAgICAgdGhpcy5fc3ViKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNyZWF0ZSBkYXRhc2V0IGlmIG5vdCBleGlzdHNcbiAgICAgICAgaWYgKCF0aGlzLl9kc19tYXAuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICB0aGlzLl9kc19tYXAuc2V0KHBhdGgsIG5ldyBEYXRhc2V0KHRoaXMsIHBhdGgsIG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZHNfbWFwLmdldChwYXRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhY3F1aXJlIHZhcmlhYmxlIGZvciAocGF0aCwgaWQpXG4gICAgICogLSBhdXRvbWF0aWNhbGx5IGFjcXVpcmUgZGF0YXNldFxuICAgICAqL1xuXG5cbiAgICBhY3F1aXJlX3ZhcmlhYmxlIChwYXRoLCBuYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGRzID0gdGhpcy5hY3F1aXJlX2RhdGFzZXQocGF0aCk7XG4gICAgICAgIC8vIGNyZWF0ZSB2YXJpYWJsZSBpZiBub3QgZXhpc3RzXG4gICAgICAgIGlmICghdGhpcy5fdmFyX21hcC5oYXMocGF0aCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Zhcl9tYXAuc2V0KHBhdGgsIG5ldyBNYXAoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFyX21hcCA9IHRoaXMuX3Zhcl9tYXAuZ2V0KHBhdGgpO1xuICAgICAgICBpZiAoIXZhcl9tYXAuZ2V0KG5hbWUpKSB7XG4gICAgICAgICAgICB2YXJfbWFwLnNldChuYW1lLCBuZXcgVmFyaWFibGUoZHMsIG5hbWUsIG9wdGlvbnMpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YXJfbWFwLmdldChuYW1lKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlbGVhc2UgcGF0aCwgaW5jbHVkaW5nIGRhdGFzZXRzIGFuZCB2YXJpYWJsZXNcbiAgICAgKi9cblxuICAgIHJlbGVhc2UocGF0aCkge1xuICAgICAgICAvLyB1bnN1YnNjcmliZVxuICAgICAgICBpZiAodGhpcy5fc3Vic19tYXAuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YihwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0ZXJtaW5hdGUgZGF0YXNldCBhbmQgdmFyaWFibGVzXG4gICAgICAgIGNvbnN0IGRzID0gdGhpcy5fZHNfbWFwLmdldChwYXRoKTtcbiAgICAgICAgZHMuX3NzY2xpZW50X3Rlcm1pbmF0ZSgpO1xuICAgICAgICBjb25zdCB2YXJfbWFwID0gdGhpcy5fdmFyX21hcC5nZXQocGF0aCk7XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiB2YXJfbWFwLnZhbHVlcygpKSB7XG4gICAgICAgICAgICB2Ll9zc2NsaWVudF90ZXJtaW5hdGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kc19tYXAuZGVsZXRlKHBhdGgpO1xuICAgICAgICB0aGlzLl92YXJfbWFwLmRlbGV0ZShwYXRoKTtcbiAgICB9XG59XG5cblxuIiwiLypcbiAgICBEYXRhc2V0IFZpZXdlclxuKi9cblxuZnVuY3Rpb24gaXRlbTJzdHJpbmcoaXRlbSkge1xuICAgIGNvbnN0IHtpZCwgaXR2LCBkYXRhfSA9IGl0ZW07XG4gICAgbGV0IGRhdGFfdHh0ID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgbGV0IGl0dl90eHQgPSAoaXR2ICE9IHVuZGVmaW5lZCkgPyBKU09OLnN0cmluZ2lmeShpdHYpIDogXCJcIjtcbiAgICBsZXQgaWRfaHRtbCA9IGA8c3BhbiBjbGFzcz1cImlkXCI+JHtpZH08L3NwYW4+YDtcbiAgICBsZXQgaXR2X2h0bWwgPSBgPHNwYW4gY2xhc3M9XCJpdHZcIj4ke2l0dl90eHR9PC9zcGFuPmA7XG4gICAgbGV0IGRhdGFfaHRtbCA9IGA8c3BhbiBjbGFzcz1cImRhdGFcIj4ke2RhdGFfdHh0fTwvc3Bhbj5gO1xuICAgIHJldHVybiBgXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiZGVsZXRlXCI+WDwvYnV0dG9uPlxuICAgICAgICAgICAgJHtpZF9odG1sfTogJHtpdHZfaHRtbH0gJHtkYXRhX2h0bWx9XG4gICAgICAgIDwvZGl2PmA7XG59XG5cblxuZXhwb3J0IGNsYXNzIERhdGFzZXRWaWV3ZXIge1xuXG4gICAgY29uc3RydWN0b3IoZGF0YXNldCwgZWxlbSwgb3B0aW9ucz17fSkge1xuICAgICAgICB0aGlzLl9kcyA9IGRhdGFzZXQ7XG4gICAgICAgIHRoaXMuX2VsZW0gPSBlbGVtO1xuICAgICAgICBjb25zdCBoYW5kbGUgPSB0aGlzLl9kcy5hZGRfY2FsbGJhY2sodGhpcy5fb25jaGFuZ2UuYmluZCh0aGlzKSk7IFxuXG4gICAgICAgIC8vIG9wdGlvbnNcbiAgICAgICAgbGV0IGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgZGVsZXRlOmZhbHNlLFxuICAgICAgICAgICAgdG9TdHJpbmc6aXRlbTJzdHJpbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IHsuLi5kZWZhdWx0cywgLi4ub3B0aW9uc307XG5cbiAgICAgICAgLypcbiAgICAgICAgICAgIFN1cHBvcnQgZGVsZXRlXG4gICAgICAgICovXG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zLmRlbGV0ZSkge1xuICAgICAgICAgICAgLy8gbGlzdGVuIGZvciBjbGljayBldmVudHMgb24gcm9vdCBlbGVtZW50XG4gICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGNhdGNoIGNsaWNrIGV2ZW50IGZyb20gZGVsZXRlIGJ1dHRvblxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIjZGVsZXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVCdG4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkZWxldGVCdG4uY2xvc2VzdChcIi5saXN0LWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0SXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZHMudXBkYXRlKHtyZW1vdmU6W2xpc3RJdGVtLmlkXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX29uY2hhbmdlKGRpZmZzKSB7XG4gICAgICAgIGNvbnN0IHt0b1N0cmluZ30gPSB0aGlzLl9vcHRpb25zO1xuICAgICAgICBmb3IgKGxldCBkaWZmIG9mIGRpZmZzKSB7XG4gICAgICAgICAgICBpZiAoZGlmZi5uZXcpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGRcbiAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IHRoaXMuX2VsZW0ucXVlcnlTZWxlY3RvcihgIyR7ZGlmZi5pZH1gKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImlkXCIsIGRpZmYuaWQpO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsZW0uYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUuaW5uZXJIVE1MID0gdG9TdHJpbmcoZGlmZi5uZXcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmLm9sZCkge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZVxuICAgICAgICAgICAgICAgIGxldCBub2RlID0gdGhpcy5fZWxlbS5xdWVyeVNlbGVjdG9yKGAjJHtkaWZmLmlkfWApO1xuICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsicmVzb2x2YWJsZVByb21pc2UiLCJyZXNvbHZlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiTUFYX1JFVFJJRVMiLCJXZWJTb2NrZXRJTyIsImNvbnN0cnVjdG9yIiwidXJsIiwib3B0aW9ucyIsInRoaXMiLCJfdXJsIiwiX3dzIiwiX2Nvbm5lY3RpbmciLCJfY29ubmVjdGVkIiwiX29wdGlvbnMiLCJfcmV0cmllcyIsIl9jb25uZWN0X3Byb21pc2VfcmVzb2x2ZXJzIiwiY29ubmVjdGluZyIsImNvbm5lY3RlZCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIiwiX2lzX3Rlcm1pbmF0ZWQiLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJlIiwiX29uX29wZW4iLCJvbm1lc3NhZ2UiLCJvbl9tZXNzYWdlIiwiZGF0YSIsIm9uY2xvc2UiLCJfb25fY2xvc2UiLCJvbmVycm9yIiwib25fZXJyb3IiLCJvbl9jb25uZWN0aW5nIiwiZXZlbnQiLCJvbl9jb25uZWN0Iiwib25fZGlzY29ubmVjdCIsInNldFRpbWVvdXQiLCJyZXRyaWVzIiwidW5kZWZpbmVkIiwiZGVidWciLCJlcnJvciIsInNlbmQiLCJjb25uZWN0ZWRQcm9taXNlIiwicHJvbWlzZSIsInB1c2giLCJEYXRhc2V0Iiwic3NjbGllbnQiLCJwYXRoIiwiX3Rlcm1pbmF0ZWQiLCJfc3NjbGllbnQiLCJfcGF0aCIsIl9oYW5kbGVycyIsIl9tYXAiLCJNYXAiLCJfc3NjbGllbnRfdGVybWluYXRlIiwiX3NzY2xpZW50X3VwZGF0ZSIsImNoYW5nZXMiLCJFcnJvciIsInJlbW92ZSIsImluc2VydCIsInJlc2V0IiwiZGlmZl9tYXAiLCJpdGVtIiwidmFsdWVzIiwic2V0IiwiaWQiLCJuZXciLCJvbGQiLCJfaWQiLCJnZXQiLCJkZWxldGUiLCJkaWZmIiwiX25vdGlmeV9jYWxsYmFja3MiLCJlQXJnIiwiZm9yRWFjaCIsImhhbmRsZSIsImhhbmRsZXIiLCJnZXRfaXRlbXMiLCJzaXplIiwiZ2V0X2l0ZW0iLCJoYXNfaXRlbSIsImhhcyIsInVwZGF0ZSIsIm1hcCIsImxlbmd0aCIsInRleHQiLCJwb3NzaWJsZSIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21fc3RyaW5nIiwiYWRkX2NhbGxiYWNrIiwicmVtb3ZlX2NhbGxiYWNrIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiVmFyaWFibGUiLCJkcyIsIl90ZXJtaW5pYXRlZCIsIl9kcyIsIl9oYW5kbGUiLCJfb25jaGFuZ2UiLCJiaW5kIiwiZGlmZnMiLCJfaXRlbSIsIm5vdGlmeV9jYWxsYmFja3MiLCJfaGFuZGVycyIsInZhbHVlIiwiaXRlbXMiLCJzc19jbGllbnRfdGVybWluYXRlIiwiTXNnVHlwZSIsIk9iamVjdCIsImZyZWV6ZSIsIk1FU1NBR0UiLCJSRVFVRVNUIiwiUkVQTFkiLCJNc2dDbWQiLCJHRVQiLCJQVVQiLCJOT1RJRlkiLCJpdGVtMnN0cmluZyIsIml0diIsImRhdGFfdHh0IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGFzZXQiLCJlbGVtIiwiX2VsZW0iLCJkZWZhdWx0cyIsInRvU3RyaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRlbGV0ZUJ0biIsInRhcmdldCIsImNsb3Nlc3QiLCJsaXN0SXRlbSIsInN0b3BQcm9wYWdhdGlvbiIsIm5vZGUiLCJxdWVyeVNlbGVjdG9yIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJpbm5lckhUTUwiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJzdXBlciIsIl9yZXFpZCIsIl9wZW5kaW5nIiwiX3N1YnNfbWFwIiwiX2RzX21hcCIsIl92YXJfbWFwIiwiZW50cmllcyIsIm1zZyIsInBhcnNlIiwidHlwZSIsInJlcWlkIiwidHVubmVsIiwib2siLCJjbWQiLCJfaGFuZGxlX25vdGlmeSIsIl9yZXF1ZXN0IiwiYXJnIiwidGhlbiIsIl9zdWIiLCJfdW5zdWIiLCJzdWJzX21hcCIsImFjcXVpcmVfZGF0YXNldCIsImFjcXVpcmVfdmFyaWFibGUiLCJuYW1lIiwidmFyX21hcCIsInJlbGVhc2UiLCJ2Il0sIm1hcHBpbmdzIjoieUNBTU8sU0FBU0EsSUFDWixJQUFJQyxFQUlKLE1BQU8sQ0FITyxJQUFJQyxTQUFRLENBQUNDLEVBQVNDLEtBQ2hDSCxFQUFXRSxDQUFPLElBRUxGLEVBQ3JCLENDVkEsTUFBTUksRUFBYyxFQUViLE1BQU1DLEVBRVQsV0FBQUMsQ0FBWUMsRUFBS0MsRUFBUSxJQUNyQkMsS0FBS0MsS0FBT0gsRUFDWkUsS0FBS0UsSUFDTEYsS0FBS0csYUFBYyxFQUNuQkgsS0FBS0ksWUFBYSxFQUNsQkosS0FBS0ssU0FBV04sRUFDaEJDLEtBQUtNLFNBQVcsRUFDaEJOLEtBQUtPLDJCQUE2QixFQUMxQyxDQUVJLGNBQUlDLEdBQWMsT0FBT1IsS0FBS0csV0FBWSxDQUMxQyxhQUFJTSxHQUFhLE9BQU9ULEtBQUtJLFVBQVcsQ0FDeEMsT0FBSU4sR0FBTyxPQUFPRSxLQUFLQyxJQUFLLENBQzVCLFdBQUlGLEdBQVcsT0FBT0Ms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
